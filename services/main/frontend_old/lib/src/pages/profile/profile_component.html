<div class="mb-3">
  <navigation [user]="user"></navigation>
</div>

<div class="container" *ngIf="user != null">
  <h4>Profile</h4>
  <p class="text-muted">Update your profile information</p>
  <hr>

  <div class="pyro-panel card mb-3 shadow-sm">
    <div class="pyro-panel-heading card-header">
      <strong>Personal information</strong>
    </div>
    <div class="pyro-panel-body card-body">
      <div class="row">
        <div class="col-3">
          <div class="form-group">
            <label>Profile Image</label>
            <profile-image [user]="user"></profile-image>
          </div>
          <div class="form-group d-flex flex-row">
            <input [disabled]="uploader.isUploading" [uploader]="uploader" class="form-control-file w-100" ng2-file-select
                   type="file">
            <button (click)="removeProfileImage()" *ngIf="user.profilePicture != null"
                    class="btn btn-sm btn-secondary ml-2">
              <i class="fas fa-fw fa-times"></i>
            </button>
          </div>
        </div>
        <div class="col-9">
          <form (submit)="updateUser($event, email.value, name.value)">
            <div class="form-group">
              <label>Name</label>
              <input #name class="form-control" placeholder="Enter your name" required type="text"
                     value="{{user.name}}">
            </div>
            <div class="form-group">
              <label>Email</label>
              <input #email class="form-control" placeholder="Enter your email address" required type="text"
                     value="{{user.email}}">
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="pyro-panel-footer card-footer text-right">
      <button class="btn btn-primary" type="submit" (click)="updateUser($event, email.value, name.value)">Save</button>
    </div>
  </div>

  <form (submit)="updatePassword($event, oldPassword.value, newPassword.value)">
    <div class="pyro-panel card mb-3 shadow-sm">
      <div class="pyro-panel-heading card-header">
        <strong>Password</strong>
      </div>
      <div class="pyro-panel-body card-body">
        <div class="form-group">
          <label>Old password</label>
          <input #oldPassword class="form-control" placeholder="Enter your old password" required type="password">
        </div>
        <div class="form-group">
          <label>New password</label>
          <input #newPassword class="form-control" placeholder="Enter your new password" required type="password">
        </div>
      </div>
      <div class="pyro-panel-footer card-footer text-right">
        <button class="btn btn-primary" type="submit">Save</button>
      </div>
    </div>
  </form>
</div>
