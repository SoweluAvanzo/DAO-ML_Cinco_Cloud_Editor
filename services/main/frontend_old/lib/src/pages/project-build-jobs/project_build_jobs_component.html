<div class="position-absolute w-100 h-100 d-flex flex-column">
  <div class="flex-grow-0 flex-shrink-0">
    <navigation [user]="user" [organization]="organization"></navigation>
  </div>
  <div class="overflow-auto flex-grow-1">
    <div class="container mt-3">
      <h1 class="h5" *ngIf="project != null">{{project.name}} > Build Jobs</h1>
    </div>
    <div class="container mt-3" *ngIf="buildJobsPage != null">

      <div class="alert alert-info" *ngIf="buildJobsPage.items.length === 0">
        <span *ngIf="buildJobsPage.number == 0">There are no build jobs for this project yet.</span>
        <span *ngIf="buildJobsPage.number > 0">There are no more build jobs on this page.</span>
      </div>

      <ng-container *ngIf="buildJobsPage.items.length > 0">
        <table class="table pyro-table">
          <thead>
            <tr>
              <th>Status</th>
              <th>Time</th>
              <th>&nbsp;</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let job of buildJobsPage.items">
              <td style="width: 1%">
                <project-build-job-status-badge [job]="job"></project-build-job-status-badge>
              </td>
              <td>
                <div class="text-muted">
                  <i class="fas fa-fw fa-calendar"></i> {{job.startedAt | date:'short'}}
                </div>
                <div *ngIf="job.finishedAt != null" class="text-muted">
                  <i class="fas fa-fw fa-clock"></i> {{getDurationAsString(job)}}
                </div>
              </td>
              <td class="text-right">
                <bs-dropdown>
                  <button class="btn btn-sm ml-1 dropdown-toggle no-caret" type="button">
                    <i class="fas fa-fw fa-ellipsis-h"></i>
                  </button>
                  <bs-dropdown-menu class="dropdown-menu-right">
                    <li *ngIf="job.status === 'PENDING' || job.status === 'BUILDING'">
                      <div class="dropdown-item" (click)="abortJob(job)">Abort</div>
                    </li>
                    <li *ngIf="job.status !== 'BUILDING'">
                      <div class="dropdown-item" (click)="deleteJob(job)">Delete</div>
                    </li>
                  </bs-dropdown-menu>
                </bs-dropdown>
              </td>
            </tr>
          </tbody>
        </table>
      </ng-container>

      <div class="btn-group btn-group-sm">
        <button class="btn btn-outline-light" (click)="previousPage()" [disabled]="!hasPreviousPage">
          <i class="fas fa-fw fa-angle-left"></i> Previous page
        </button>
        <button class="btn btn-outline-light" disabled>
          {{(buildJobsPage.number + 1)}} / {{buildJobsPage.amountOfPages}}
        </button>
        <button class="btn btn-outline-light" (click)="nextPage()" [disabled]="!hasNextPage">
          Next page <i class="fas fa-fw fa-angle-right"></i>
        </button>
      </div>
    </div>
  </div>
</div>
