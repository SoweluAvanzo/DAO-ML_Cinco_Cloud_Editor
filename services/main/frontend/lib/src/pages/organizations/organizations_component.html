<div class="mb-3">
  <navigation [user]="currentUser"></navigation>
</div>

<div class="container">

  <h4>Organizations</h4>
  <p class="text-muted">All organizations you are a member of</p>
  <hr>

  <div *ngIf="canCreateOrganization">
    <button (click)="newOrganizationModal.open()" class="btn btn-primary btn-sm">Create Organization</button>
    <hr>
  </div>

  <div *ngIf="organizations.length === 0" class="alert alert-info">
    There aren't any organizations yet.
  </div>

  <div *ngIf="organizations.length > 0" class="list-group">
    <div *ngFor="let org of organizations; let i = $index" class="list-group-item pyro-list-entry d-flex flex-row">
      <div class="mr-3">
        <img *ngIf="org.logo != null" src="{{org.logo.downloadPath}}" style="width: 60px; height: auto;">
        <div *ngIf="org.logo == null" style="height: 40px; width: 60px; background: rgba(0,0,0,.1)"></div>
      </div>
      <div class="w-100">
        <a [routerLink]="getProjectsUrl(org)" class="org-body-text-color">
          <h5>{{org.name}}</h5>
        </a>
        <p class="mb-0">
          <em *ngIf="org.description != null && org.description.trim() === ''" class="text-muted">No description
            provided</em>
          <span *ngIf="org.description != null && org.description.trim() !== ''">{{org.description}}</span>
        </p>
      </div>
      <div class="flex-shrink-0">
        <div *ngIf="isOrgManager" class="btn-group btn-group-sm">
          <button (click)="editOrganizationModal.open(org)" class="btn"><i class="fas fa-edit"></i></button>
          <button (click)="deleteOrganization(org)" class="btn"><i class="fas fa-trash"></i></button>
          <button (click)="leaveOrganization(org)" class="btn"><i class="fas fa-sign-out-alt"></i></button>
        </div>
      </div>
    </div>
  </div>
</div>

<new-organization
    #newOrganizationModal
    (created)="addOrganization($event)"
    (dismiss)="newOrganizationModal.close()"
>
</new-organization>

<edit-organization
    #editOrganizationModal
    (dismiss)="editOrganizationModal.close()"
    (updated)="updateOrganization($event)"
>
</edit-organization>
