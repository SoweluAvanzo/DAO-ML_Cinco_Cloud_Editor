<div class="position-absolute w-100 h-100 d-flex flex-column">
  <div class="flex-grow-0 flex-shrink-0">
    <navigation [user]="user" [organization]="organization"></navigation>
  </div>
  <div class="overflow-auto flex-grow-1">
    <div class="container mt-3">
      <h1 class="h5" *ngIf="project != null">{{project.name}} > Build Jobs</h1>
    </div>
    <div class="container mt-3">

      <div class="alert alert-info" *ngIf="buildJobs.length === 0">
        There are no build jobs for this project yet.
      </div>

      <ng-container *ngIf="buildJobs.length > 0">
        <table class="table pyro-table">
          <thead>
            <tr>
              <th>Status</th>
              <th>Time</th>
              <th>&nbsp;</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let job of buildJobs">
              <td width="1">
                <project-build-job-status-badge [job]="job"></project-build-job-status-badge>
              </td>
              <td>
                <div class="text-muted">
                  <i class="fas fa-fw fa-calendar"></i> {{job.startedAt | date:'short'}}
                </div>
                <div *ngIf="job.finishedAt != null" class="text-muted">
                  <i class="fas fa-fw fa-clock"></i> {{getDurationAsString(job)}}
                </div>
              </td>
              <td class="text-right">
                <bs-dropdown>
                  <button class="btn btn-sm ml-1 dropdown-toggle no-caret" type="button">
                    <i class="fas fa-fw fa-ellipsis-h"></i>
                  </button>
                  <bs-dropdown-menu class="dropdown-menu-right">
                    <li *ngIf="job.status === 'PENDING' || job.status === 'BUILDING'">
                      <div class="dropdown-item" (click)="abortJob(job)">Abort</div>
                    </li>
                    <li *ngIf="job.status !== 'BUILDING'">
                      <div class="dropdown-item" (click)="deleteJob(job)">Delete</div>
                    </li>
                  </bs-dropdown-menu>
                </bs-dropdown>
              </td>
            </tr>
          </tbody>
        </table>
      </ng-container>

    </div>
  </div>
</div>
