<div *ngIf="currentFile!=null" class="h-100 d-flex flex-column">

    <div class="card-header d-flex flex-row align-items-center pyro-panel-heading">

		<template [ngIf]="isModelFile()">
			<bs-dropdown class="mr-2">
			    <button type="button" class="btn btn-sm dropdown-toggle" >
			      Export
			    </button>
			    <bs-dropdown-menu>
			      <li><a class="dropdown-item" href="#" (click)="export($event, 'svg')">Export as SVG</a></li>
			      <li><a class="dropdown-item" href="#" (click)="export($event, 'png')">Export as PNG</a></li>
			      <!--<li><a class="dropdown-item" href="#" [attr.download]="currentFile.filename+'.'+currentFile.extension">Export for CINCO</a></li>-->
			    </bs-dropdown-menu>
			  </bs-dropdown>
		 
		 	<bs-dropdown class="mr-2">
			    <button type="button" class="btn btn-sm dropdown-toggle" data-toggle="tooltip" data-placement="bottom" title="Choose from different edge routing algorithms">
			      Routing
			    </button>
			    <bs-dropdown-menu>
	              <h6 class="dropdown-header">Routing modes</h6>
	              <a class="dropdown-item" [class.active]="isActiveRouter(null)" href (click)="changeRouteLayout(null,$event)">Default</a>
	              <a class="dropdown-item" [class.active]="isActiveRouter('orthogonal')" href (click)="changeRouteLayout('orthogonal',$event)">Orthogonal</a>
	              <a class="dropdown-item" [class.active]="isActiveRouter('metro')" href (click)="changeRouteLayout('metro',$event)">Metro</a>
	              <a class="dropdown-item" [class.active]="isActiveRouter('manhattan')" href (click)="changeRouteLayout('manhattan',$event)">Manhatten</a>
	              <h6 class="dropdown-header">Connector layout</h6>
	              <a class="dropdown-item" [class.active]="isActiveConnector('normal')" href (click)="changeConnectorLayout('normal',$event)">Normal</a>
	              <a class="dropdown-item" [class.active]="isActiveConnector('smooth')" href (click)="changeConnectorLayout('smooth',$event)">Smooth</a>
	              <a class="dropdown-item" [class.active]="isActiveConnector('rounded')" href (click)="changeConnectorLayout('rounded',$event)">Rounded</a>
	              <a class="dropdown-item" [class.active]="isActiveConnector('jumpover')" href (click)="changeConnectorLayout('jumpover',$event)">Jumpover</a>
			    </bs-dropdown-menu>
			  </bs-dropdown>
			  <!--
			  <div *ngIf="isModelFile()" class="btn-group btn-group-sm mr-2">
			  	<button class="btn" (click)="undo()">
			  	  <i class="fas fa-undo-alt"></i> Undo
			  	</button>
			  	<button class="btn" (click)="redo()">
			  	  <i class="fas fa-redo-alt"></i> Redo
			  	</button>
			  </div>
			  -->
			  <template [ngIf]="isModelFile()&&hasGenerator()">
			  	<template [ngIf]="getGenerators().length <= 1">
			  		<button class="btn btn-sm" (click)="triggerGenerator(null,null)"	
			  			data-toggle="tooltip" data-placement="bottom" title="Trigger the generation process"
			  			*ngIf="currentFile.$type()=='flowgraph.FlowGraphDiagram'">
			  			<i class="fas fa-fw fa-cog"></i> <strong>G</strong>
			  		</button>
			  	</template>
			  	<template [ngIf]="getGenerators().length > 1">
			  		<bs-dropdown class="mr-2">
			  			<button type="button" class="btn btn-sm dropdown-toggle" data-toggle="tooltip" data-placement="bottom" title="Choose from different generators">
			  				<i class="fas fa-fw fa-cog"></i> <strong>G</strong>
			  			</button>
			  			<bs-dropdown-menu>
			  				<a *ngFor="let g of getGenerators().entries" class="dropdown-item" href (click)="triggerGenerator(g.key,$event)">{{g.value}}</a>
			  			</bs-dropdown-menu>
			  		</bs-dropdown>
			  	</template>
			  </template>
  	          <div *ngIf="isModelFile()" id="glue-toggle" class="btn-group btn-group-sm mr-2">
  			   		<button type="button" (click)="toggleGluelines()" [class.active]="isGluelines" class="btn btn-sm btn-outline-secondary" data-toggle="tooltip" data-placement="bottom" title="Toggle the glue lines on canvas">
  			   			<i class="fas fa-ruler-combined"></i>
  			   		</button>
  			   </div>
  			  <div *ngIf="getEditorButtons().isNotEmpty" class="btn-group btn-group-sm mr-2">
   			  	<button *ngFor="let b of getEditorButtons().entries" type="button" class="btn" (click)="executeGraphmodelButton(b.value)">
   			  	  {{b.value}}
   			  	</button>
   			  </div>
		  </template>
             	
        <div class="flex-shrink-0 ml-auto btn-group btn-group-sm" role="group" *ngIf="currentFile!=null">
    		<template [ngIf]="isModelFile()">
    			<input
    			[ngModel]="getScaleValue()"
  				(ngModelChange)="updateScaleFactorStr($event.toString(),true)"
    			type="range" min="25" max="150">
    		</template>
        </div>
        
     </div>

    <div class="card pyro-panel h-100 d-flex flex-column">
        <div class="card-body pyro-panel-body p-0 overflow: hidden">
        	<template [ngIf]="isExternalLibrary()">
        		<p>No Editor available for externalLibrary Ecore</p>
        	</template>
            <!-- for each graph type -->
			<flowgraphdiagram-canvas
			#flowgraphdiagram_canvas_component
			*ngIf="isFlowGraphDiagram()"
			    [user]="user"
			    [isError]="isError"
			    [isWarning]="isWarning"
			    [isInfo]="isInfo"
			    [isFullScreen]="isFullScreen"
			    [currentGraphModel]="currentFile"
			    [currentLocalSettings]="currentLocalSettings"
			    (hasChanged)="hasChangedSC.add($event)"
			    (selectionChanged)="selectionChangedSC.add($event)"
			    (selectionChangedModal)="selectionChangedModalSC.add($event)"
			    (jumpTo)="jumpToSC.add($event)"
			></flowgraphdiagram-canvas>
	        </div>
	    </div>
	</div>
